<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>add</title>
  <link
      rel="stylesheet"
      href="https://joeytsai03.github.io/resource/layui/css/layui.css"
      media="all"
  />
  <script src="https://joeytsai03.github.io/resource/layui/layui.js"></script>
  <script>
    layui.use(["layer", "form", "layedit"], function() {
      var form = layui.form;
      var layer = layui.layer;
      var $ = layui.jquery;
      var layedit = layui.layedit;
      var index = layedit.build("content");

      //监听提交
      form.on("submit(go)", function(massage) {
        alert(massage.field.like)
        $.ajax({
          url: "http://localhost:8763/issue/merge",
          type: "POST",
          data: {
            id: massage.field.id,
            title: massage.field.title,
            author: massage.field.author,
            introduce: massage.field.introduce,
            topicPic: massage.field.topicPic,
            content: layedit.getContent(index),
            tagId:message.field.like
          },
          success: function(msg) {
            var returnCode = msg.code; //取得返回数据（Sting类型的字符串）的信息进行取值判断
            if (returnCode == 0) {
              layer.msg("新增成功", { icon: 1 });
            } else {
              layer.msg("新增失败", { icon: 5 });
            }
          }
        });
        return false;
      });
    });
  </script>
</head>
<body>
<div
    class="layui-row"
    style="text-align: center;font-size: 30px;margin-top: 20px;margin-bottom: 20px;"
>
  <div class="layui-col-lg10">
    添加文章
  </div>
</div>
<div class="layui-row">
  <div class="layui-col-md10">
    <form
        class="layui-form"
        action=""
        lay-filter="example"
        style="margin-top:20px"
    >
      <div class="layui-form-item">
        <label class="layui-form-label">id</label>
        <div class="layui-input-block">
          <input
              type="text"
              name="id"
              lay-verify="id"
              autocomplete="off"
              placeholder="请输入id"
              class="layui-input"
              readonly="readonly"
              style="background:#CCCCCC"
          />
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">作者</label>
        <div class="layui-input-block">
          <input
              type="text"
              name="author"
              lay-verify="author"
              autocomplete="off"
              placeholder="请输入作者"
              class="layui-input"
          />
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">标题</label>
        <div class="layui-input-block">
          <input
              type="text"
              name="title"
              lay-verify="title"
              autocomplete="off"
              placeholder="请输入标题"
              class="layui-input"
          />
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">图片</label>
        <div class="layui-input-block">
          <input
              type="text"
              name="topicPic"
              lay-verify="topicPic"
              autocomplete="off"
              placeholder="请输入图片地址"
              class="layui-input"
          />
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">介绍</label>
        <div class="layui-input-block">
          <input
              type="text"
              name="introduce"
              lay-verify="introduce"
              autocomplete="off"
              placeholder="请输入介绍"
              class="layui-input"
          />
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">标签</label>
        <div class="layui-input-block">
          <input type="checkbox" name="like" value="1" title="大众">
          <input type="checkbox" name="like" value="2" title="丰田" >
          <input type="checkbox" name="like" value="3" title="三菱">
          <input type="checkbox" name="like" value="4" title="宝马">
          <input type="checkbox" name="like" value="5" title="奔驰" >
          <input type="checkbox" name="like" value="6" title="法拉利">
        </div>
      </div>
      <div class="layui-form-item">
        <label class="layui-form-label">内容</label>
        <div class="layui-input-block">
          <input
              type="text"
              name="content"
              id="content"
              lay-verify="pattern"
              autocomplete="off"
              placeholder="请输入内容"
              class="layui-input"
          />
        </div>
      </div>
      <div class="layui-form-item">
        <div class="layui-input-block">
          <button class="layui-btn" lay-submit="" lay-filter="go">
            立即提交
          </button>
          <button
              type="reset"
              id="btn-reset"
              class="layui-btn layui-btn-primary"
          >
            重置
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
</body>
</html>
